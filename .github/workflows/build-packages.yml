# This is a basic workflow that is manually triggered

name: Manual workflow

on:
  push:
    branches:
      - chore/build-pipelines

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  linux-x64:
    if: false
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
    - uses: actions/checkout@v3

    - name: Run buildx64.sh
      run: |
        source ./buildx64.sh
      working-directory: src/builds/python/linux/
      
    - name: Publish Artifact
      uses: actions/upload-artifact@v2.2.4
      with:
        name: linuxresult-x64
        path: src/builds/python/linux/build-result

  linux-arm64:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
    - uses: actions/checkout@v3

    - name: Set up QEMU
      uses: docker/setup-qemu-action@v1

    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v1
      
    - name: Run buildarm64.sh
      run: |
        source ./buildarm64.sh
      working-directory: src/builds/python/linux/
      
    - name: Publish Artifact
      uses: actions/upload-artifact@v2.2.4
      with:
        name: linuxresult-x64
        path: src/builds/python/linux/build-result

  win-x64:
    if: false
    runs-on: windows-latest

    steps:
      - uses: actions/checkout@v3
      
      - name: Install .NET Core SDK
        uses: actions/setup-dotnet@v3
        with:
          dotnet-version: '8.0.100-preview.2.23157.25'

      - name: Run Python build script
        run: python build.py
        working-directory: src/builds/python/windows

      - name: Publish artifact
        uses: actions/upload-artifact@v2.2.4
        with:
          name: winresult
          path: src/builds/python/windows/build-result

  mac-x64:
    if: false
    runs-on: macOS-latest

    steps:
      - uses: actions/checkout@v3

      - name: Install .NET Core SDK
        uses: actions/setup-dotnet@v1
        with:
          dotnet-version: '8.0.100-preview.2.23157.25'

      - name: Run Python build script
        run: python3 ./build.py
        working-directory: src/builds/python/mac

      - name: Publish artifact
        uses: actions/upload-artifact@v2.2.4
        with:
          name: macresult
          path: src/builds/python/mac/build-result

